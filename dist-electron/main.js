"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const o=require("electron"),d=require("node:url"),e=require("node:path");var c=typeof document<"u"?document.currentScript:null;const l=e.dirname(d.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:c&&c.src||new URL("main.js",document.baseURI).href));console.log("__dirname",__dirname);console.log("dirname",l);process.env.APP_ROOT=e.join(__dirname,"..");const s=process.env.VITE_DEV_SERVER_URL,p=e.join(process.env.APP_ROOT,"dist-electron"),i=e.join(process.env.APP_ROOT,"dist");console.log("process.env",`node ${e.join(process.env.APP_ROOT,"service/index.js")}`);process.env.VITE_PUBLIC=s?e.join(process.env.APP_ROOT,"public"):i;let n;function a(){n=new o.BrowserWindow({width:1200,height:800,icon:e.join(process.env.VITE_PUBLIC,"electron-vite.svg"),webPreferences:{preload:e.join(__dirname,"preload.mjs"),nodeIntegration:!0,contextIsolation:!1,webSecurity:!1}}),__dirname.split(e.sep).indexOf("app.asar")>=0||n.webContents.openDevTools(),n.webContents.on("did-finish-load",()=>{n==null||n.webContents.send("main-process-message",new Date().toLocaleString())}),s?n.loadURL(s):n.loadFile(e.join(i,"index.html"))}o.ipcMain.on("renderer-process-message",(t,r)=>{console.log("message",decodeURIComponent(r))});o.ipcMain.handle("renderer-process-message",async(t,r)=>{console.log("message",decodeURIComponent(r)),console.log("event",t)});o.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(o.app.quit(),n=null)});o.app.commandLine.appendSwitch("ingore-certificate-errors");o.app.on("activate",()=>{o.BrowserWindow.getAllWindows().length===0&&a()});o.app.whenReady().then(a);exports.MAIN_DIST=p;exports.RENDERER_DIST=i;exports.VITE_DEV_SERVER_URL=s;
