"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const n=require("electron"),p=require("node:url"),o=require("node:path");var a=typeof document<"u"?document.currentScript:null;o.dirname(p.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:a&&a.src||new URL("main.js",document.baseURI).href));process.env.APP_ROOT=o.join(__dirname,"..");const t=process.env.VITE_DEV_SERVER_URL,l=o.join(process.env.APP_ROOT,"dist-electron"),c=o.join(process.env.APP_ROOT,"dist");console.log("process.env",`node ${o.join(process.env.APP_ROOT,"service/index.js")}`);process.env.VITE_PUBLIC=t?o.join(process.env.APP_ROOT,"public"):c;let e;function d(){e=new n.BrowserWindow({width:1400,height:800,icon:o.join(process.env.VITE_PUBLIC,"electron-vite.svg"),webPreferences:{preload:o.join(__dirname,"preload.js"),nodeIntegration:!0,contextIsolation:!0,webSecurity:!1}}),__dirname.split(o.sep).indexOf("app.asar")>=0||e.webContents.openDevTools(),e.webContents.on("did-finish-load",()=>{e==null||e.webContents.send("main-process-message",new Date().toLocaleString())}),t?e.loadURL(t):e.loadFile(o.join(c,"index.html"))}n.ipcMain.on("renderer-process-message",(i,s)=>{console.log("message",decodeURIComponent(s))});n.ipcMain.handle("renderer-process-message",async(i,s)=>{console.log("message",decodeURIComponent(s))});n.ipcMain.on("openWindow",(i,s)=>{n.dialog.showOpenDialog(e,{properties:["openFile","openDirectory"]}).then(r=>{r.canceled||(console.log("选定的文件路径:",r.filePaths),e==null||e.webContents.send("choose-path",r.filePaths))})});n.app.on("window-all-closed",()=>{process.platform!=="darwin"&&(n.app.quit(),e=null)});n.app.commandLine.appendSwitch("ingore-certificate-errors");n.app.on("activate",()=>{n.BrowserWindow.getAllWindows().length===0&&d()});n.app.on("browser-window-created",(i,s)=>{require("@electron/remote/main").enable(s.webContents)});n.app.whenReady().then(d);exports.MAIN_DIST=l;exports.RENDERER_DIST=c;exports.VITE_DEV_SERVER_URL=t;
